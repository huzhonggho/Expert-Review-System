import{a as x}from"./review-46614018.js";import{d as F,r as p,u as E,a as r,o as U,c as C,b as f,e as a,w as n,f as m,_ as R}from"./index-ddeb11e4.js";const V={class:"review-add-container"},q={class:"form"},B={class:"btns"},J=F({__name:"add",setup(S){const d=p(null),v=E(),i=p(!1),t=p({reviewName:"",duration:1,isEnabled:!0,description:"",memo:"",judges:[]}),g={reviewName:{required:!0,message:"请输入评审名称",trigger:"blur"},description:{required:!0,message:"请输入评审要求",trigger:"blur"},judges:{validator:s=>{const e=t.value.judges;if(e.length<=0)return s.message="评分项目至少有一项",!1;for(const u in e){const l=e[u].value.split("-");if(e[u].key.trim()==="")return s.message="请输入评分项目名",!1;if(isNaN(parseFloat(l[0]))||isNaN(parseFloat(l[1]))||parseFloat(l[0]).toString()!=l[0]||parseFloat(l[1]).toString()!=l[1])return s.message="请依照正确格式输入分值范围",!1}return!0},trigger:"input"}},c=()=>{var s;t.value={reviewName:"",duration:1,isEnabled:!0,description:"",memo:"",judges:[]},(s=d.value)==null||s.restoreValidation()},b=()=>{var s;(s=d.value)==null||s.validate(async e=>{if(e)v.error("请将表单填写完整");else{i.value=!0;try{await x(t.value)}catch{i.value=!1;return}i.value=!1,v.success("添加成功"),c()}})};return(s,e)=>{const u=r("n-input"),l=r("n-form-item"),w=r("n-input-number"),y=r("n-switch"),N=r("n-alert"),h=r("n-dynamic-input"),j=r("n-space"),_=r("n-button"),k=r("n-form");return U(),C("div",V,[f("div",q,[a(k,{ref_key:"formRef",ref:d,model:t.value,rules:g,size:"medium","label-placement":"left","label-width":100,"label-align":"left","show-require-mark":!1},{default:n(()=>[a(l,{label:"评审名称",path:"reviewName"},{default:n(()=>[a(u,{value:t.value.reviewName,"onUpdate:value":e[0]||(e[0]=o=>t.value.reviewName=o),placeholder:"输入评审名称",clearable:""},null,8,["value"])]),_:1}),a(l,{label:"时长(分钟)",path:"duration"},{default:n(()=>[a(w,{value:t.value.duration,"onUpdate:value":e[1]||(e[1]=o=>t.value.duration=o),min:1},null,8,["value"])]),_:1}),a(l,{label:"是否启用",path:"isEnabled"},{default:n(()=>[a(y,{value:t.value.isEnabled,"onUpdate:value":e[2]||(e[2]=o=>t.value.isEnabled=o)},null,8,["value"])]),_:1}),a(l,{label:"评审要求",path:"description"},{default:n(()=>[a(u,{value:t.value.description,"onUpdate:value":e[3]||(e[3]=o=>t.value.description=o),type:"textarea",placeholder:"输入评审要求",clearable:""},null,8,["value"])]),_:1}),a(l,{label:"备注",path:"memo"},{default:n(()=>[a(u,{value:t.value.memo,"onUpdate:value":e[4]||(e[4]=o=>t.value.memo=o),type:"textarea",placeholder:"备注可以为空",clearable:""},null,8,["value"])]),_:1}),a(l,{label:"评分项目",path:"judges"},{default:n(()=>[a(j,{vertical:"",style:{width:"100%"}},{default:n(()=>[a(N,{"show-icon":!1},{default:n(()=>[m(" 评分项目中分值范围为 1-5 时将在pad端显示为 星级评分 ")]),_:1}),a(h,{value:t.value.judges,"onUpdate:value":e[5]||(e[5]=o=>t.value.judges=o),preset:"pair","key-placeholder":"评分项名称","value-placeholder":"分值范围(如: 0-100)"},null,8,["value"])]),_:1})]),_:1}),a(l,null,{default:n(()=>[f("div",B,[a(_,{"attr-type":"button",onClick:c},{default:n(()=>[m(" 重置 ")]),_:1}),a(_,{loading:i.value,type:"primary",onClick:b},{default:n(()=>[m(" 添加 ")]),_:1},8,["loading"])])]),_:1})]),_:1},8,["model"])])])}}});const T=R(J,[["__scopeId","data-v-81630b1b"]]);export{T as default};
